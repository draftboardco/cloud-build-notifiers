[
    {
      "type": "header",
      "text": {
        "type": "plain_text",
        "text": "Cloud Build Notification",
        "emoji": true
      }
    },
    {
      "type": "section",
      "fields": [
        {
          "type": "mrkdwn",
          "text": "*Project:*\n{{.Build.ProjectId}}"
        },
        {
          "type": "mrkdwn",
          "text": "*Build ID:*\n{{.Build.Id}}"
        }
      ]
    },
    {
      "type": "section",
      "text": {
        "type": "mrkdwn",
        "text": "*Status:* {{if eq .Build.Status \"SUCCESS\"}}✅{{else if eq .Build.Status \"FAILURE\"}}❌{{else if eq .Build.Status \"WORKING\"}}⏳{{else}}❓{{end}} {{.Build.Status}}"
      }
    },
    {
      "type": "section",
      "text": {
        "type": "mrkdwn",
        "text": "{{if .Build.Source}}{{with .Build.Source.Source}}{{if .GitSource}}*GitHub Repository Details*\n\n*Repository:* {{$.Build.Substitutions.REPO_FULL_NAME}}\n*Branch:* {{$.Build.Substitutions.BRANCH_NAME}} ({{$.Build.Substitutions.SHORT_SHA}})\n*Commit:* `{{.GitSource.Revision}}`{{else if .StorageSource}}*Cloud Storage Details*\n\n*Bucket:* gs://{{.StorageSource.Bucket}}\n*Object:* `{{.StorageSource.Object}}`\n*Generation:* {{.StorageSource.Generation}}{{end}}{{end}}{{end}}"
      }
    },
    {
      "type": "section",
      "text": {
        "type": "mrkdwn",
        "text": "{{if .Build.Substitutions}}*Deployment Details*{{if eq .Build.Substitutions._CLUSTER_PROJECT \"draftboard-368620\"}}\n\n⚠️ *PRODUCTION DEPLOYMENT*{{end}}\n\n*Project:* {{.Build.Substitutions._CLUSTER_PROJECT}}\n*Cluster:* {{.Build.Substitutions._CLUSTER}}{{if .Build.Substitutions._LOCATION}}\n*Location:* {{.Build.Substitutions._LOCATION}}{{end}}\n*Namespace:* {{.Build.Substitutions._NAMESPACE}}{{end}}"
      }
    },
    {
      "type": "divider"
    },
    {
      "type": "section",
      "text": {
        "type": "mrkdwn",
        "text": "View detailed build information in the Cloud Console"
      },
      "accessory": {
        "type": "button",
        "text": {
          "type": "plain_text",
          "text": "View Logs",
          "emoji": true
        },
        "value": "view_logs",
        "url": "{{.Build.LogUrl}}",
        "action_id": "view_logs"
      }
    }
  ]

